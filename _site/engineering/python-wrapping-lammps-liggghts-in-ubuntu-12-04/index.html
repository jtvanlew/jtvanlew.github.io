<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8">
<title>PYTHON WRAPPING LAMMPS/LIGGGHTS IN UBUNTU 12.04 &#8211; JON</title>
<meta name="description" content="Update: I reformatted a computer in my lab with Ubuntu 14.04. I went through installing LIGGGHTS and the Python wrapper &#8211; along with an mpi4py instead of pypar for parallelizing with Python. It was actually much simpler than the process I&#8217;ve outlined here. I&#8217;m going to leave this here for anyone with Ubuntu 12.04 but I want to note that if you&#8217;ve got a newer version of Ubuntu to ignore much of this&#8230;

">
<meta name="keywords" content="lammps, liggghts, python, DEM">

<!-- Twitter Cards -->
<meta name="twitter:title" content="Python wrapping LAMMPS/LIGGGHTS in Ubuntu 12.04">
<meta name="twitter:description" content="Update: I reformatted a computer in my lab with Ubuntu 14.04. I went through installing LIGGGHTS and the Python wrapper &#8211; along with an mpi4py instead of pypar for parallelizing with Python. It was actually much simpler than the process I&#8217;ve outlined here. I&#8217;m going to leave this here for anyone with Ubuntu 12.04 but I want to note that if you&#8217;ve got a newer version of Ubuntu to ignore much of this&#8230;

">
<meta name="twitter:site" content="@jtvanlew">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/Molly_Small.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Python wrapping LAMMPS/LIGGGHTS in Ubuntu 12.04">
<meta property="og:description" content="Update: I reformatted a computer in my lab with Ubuntu 14.04. I went through installing LIGGGHTS and the Python wrapper &#8211; along with an mpi4py instead of pypar for parallelizing with Python. It was actually much simpler than the process I&#8217;ve outlined here. I&#8217;m going to leave this here for anyone with Ubuntu 12.04 but I want to note that if you&#8217;ve got a newer version of Ubuntu to ignore much of this&#8230;

">
<meta property="og:url" content="/engineering/python-wrapping-lammps-liggghts-in-ubuntu-12-04">
<meta property="og:site_name" content="Jon">






<link rel="canonical" href="/engineering/python-wrapping-lammps-liggghts-in-ubuntu-12-04">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Jon Feed">
<link rel="author" href="http://plus.google.com/https://plus.google.com/+JonVanLew/?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Webfonts -->
<link href='http://fonts.googleapis.com/css?family=Vollkorn:400,700&amp;subset=latin,latin-ext' rel='stylesheet'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700,800,600&amp;subset=latin,latin-ext' rel='stylesheet'>
<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,700' rel='stylesheet'>
<link href='http://fonts.googleapis.com/css?family=Pathway+Gothic+One' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/assets/css/vendor/normalize.css">
<link rel="stylesheet" href="/assets/css/vendor/foundation.min.css">
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="stylesheet" href="/assets/css/post.css">
<link rel="stylesheet" href="/assets/css/post-cover.css">
<link rel="stylesheet" href="/assets/css/additional.css">


<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script>/*<![CDATA[*/window.jQuery||document.write('<script src="/assets/js/vendor/jquery-1.11.1.min.js"><\/script>');/*]]>*/</script>





<!-- Ammap scripts -->
<script src="/assets/js/vendor/ammap.js" type="text/javascript"></script>
<script src="/assets/js/vendor/worldLow.js" type="text/javascript"></script>
<script src="/assets/js/vendor/usaLow.js" type="text/javascript"></script>
<!--/Ammap scripts -->




<script type="text/javascript" src="/assets/js/vendor/amcharts.js"></script>





<!-- Battle For the Net -->
<script type="text/javascript">
    var _bftn_options = {
      animation: 'banner',
      position: 'bottomright',
      theme: 'dark'
    }
</script>
<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/icons/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/icons/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/icons/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/icons/apple-touch-icon-144x144-precomposed.png">
</head>

<style type="text/css">@media only screen and (min-width:43.75em){.notepad-post-content div>p:first-child:first-letter{float: left; font-size: 4.875rem; line-height: 3.750rem; padding-top: 0.375rem; padding-right: 0.375rem; font-family:serif}}</style>
<body class="post-template">
    <main id="notepad-post-container-simple" class="notepad-post-container-simple" role="main">
        <header class="notepad-post-header-simple">
            <div class="notepad-post-menu-header-simple">
                
                <a class="notepad-blog-logo" href=""><img src="/images/elements/Molly_Small.png" alt="Blog Logo" /></a>


        <div class="notepad-blog-menu">      
    <div class="notepad-mobile-menu show-for-small">
        <a href="#"><i class="fa fa-bars"></i></a>
    </div>
    <ul class="notepad-menu">
        <li class="notepad-mobile-close-btn show-for-small text-right">
            <a href="#"><i class="fa fa-times"></i></a>
        </li>
        <li>
            <a href="/">Home</a>
        </li><li>
            <a href="/categories">Categories</a>
        </li><li>
            <a href="/about">About</a>
        </li><li>
            <a href="/photos/maps/">Travel Photos</a>
        </li><li>
            <a href="/page/xively-temp/">Work</a>
        </li>
        <!-- <li><a href="/feed.xml" title="Atom/RSS feed">Feed</a></li> -->
    </ul>
</div>
 <div class="clearfix"></div>
            </div>
            <div class="notepad-post-title-simple row">
                <div class="small-12 columns">
                    <div class="notepad-post-meta-simple">
                        <h1>Python wrapping LAMMPS/LIGGGHTS in Ubuntu 12.04</h1>
                        <p class="meta">by <strong><a href="/author/Jon Van Lew">Jon Van Lew</a></strong> &#8212; <span class="simple-view-tag-list"><span class="tags-loop"><span class="tag-prefix">on</span> <span class="tag-link"> <a href="/tags/index.html#lammps" title="Posts tagged with lammps">lammps</a> </span><span class="tag-link"> <a href="/tags/index.html#liggghts" title="Posts tagged with liggghts">liggghts</a> </span><span class="tag-link"> <a href="/tags/index.html#python" title="Posts tagged with python">python</a> </span><span class="tag-link"> <a href="/tags/index.html#DEM" title="Posts tagged with DEM">DEM</a> </span></span></span><strong><time datetime="2014-04-11T00:00:00-07:00">11 Apr 2014</time></strong>

 and updated on <strong><time datetime="2014-12-24T00:00:00-08:00">24 Dec 2014</time></strong></p>
</p>
                    </div>
                </div>
            </div>
        </header>
    </main>
    <article class="notepad-post-content post">
        <div>
            <div class="paddings">
                <p>Update: I reformatted a computer in my lab with Ubuntu 14.04. I went through installing LIGGGHTS and the Python wrapper – along with an mpi4py instead of pypar for parallelizing with Python. It was actually much simpler than the process I’ve outlined here. I’m going to leave this here for anyone with Ubuntu 12.04 but I want to note that if you’ve got a newer version of Ubuntu to ignore much of this…</p>

<div id="wrapper" style="width:100%; text-align:center">
    <img src="http://lammps.sandia.gov/movies/logo.gif" alt="LAMMPS logo" />
</div>
<p><br /></p>

<p>As I’ve <a href="http://jon.vanlew.net/tag/liggghts.html">discussed before</a>, I’ve been using LIGGGHTS for my DEM simulations in my research. Whenever I’ve had to customize the program, I gotten around coding of the source (written in C++) by making use of the LAMMPS functionality of a <a href="http://lammps.sandia.gov/doc/Section_python.html">Python wrapper</a>. With that, instead of directly calling LIGGGHTS with input files, I have Python scripts that generate my input scripts as well as providing the convenience of all kinds of sophisticated Python hacking on top.</p>

<p>The first time I got it working on my (Ubuntu 12.04) machine at work, it took like a week of pulling out my hair on internet forums and just plain guess work. My hard drive on that computer failed recently so I had to get everything back up and running from scratch. Now I’m just slightly more savvy with the guts of Ubuntu so instead of a miserable week it was just an annoying afternoon. Feeling proud of myself, I figured I’d write this to help anyone else who might want the Python wrapper with Ubuntu – as well as for future-me when I’ve got more computer problems and need to do this again.</p>

<p>Let’s start from the very first step of pulling LIGGGHTS from the public git repository. You can get it here:
    git clone https://github.com/CFDEMproject/LIGGGHTS-PUBLIC.git ~/LIGGGHTS/LIGGGHTS-PUBLIC</p>

<p>If you don’t have <code>mpic++</code> installed already, you’ll need it to build LIGGGHTS. You should do an <code>apt-get</code>, it’s </p>

<pre><code>sudo apt-get install mpic++
</code></pre>

<p>Yours might be different and my expertise ends right there. With openmpi install, do a</p>

<pre><code>cd ~/LIGGGHTS/LIGGGHTS-PUBLIC/src
</code></pre>

<p>to get to the source directory. On Ubuntu 12.04, you can straight away do </p>

<pre><code>make clean-all
make fedora
</code></pre>

<p>This should take a while. If there are errors really look at the error log. Almost always there is some line in the log that tells you exactly what went wrong and where. It’s often hidden among pages and pages of junk that’s frightening and confusing to people like me. But keep looking and you’ll find out exactly what you need (sometimes it’s something like gfortran not being present).</p>

<p>All of that simply got your Ubuntu running with LIGGGHTS. Now we can get the Python wrapper working. This part is my contribution. from the source directory, navigate to the Make directory.</p>

<pre><code>cd ~/LIGGGHTS/LIGGGHTS-PUBLIC/src/MAKE
</code></pre>

<p>In there, locate the file named <code>Makefile.fedora</code>. Either do a <code>vim</code> to open it or <code>gedit</code>. Locate the line that says <code>shflag</code> (in mine it is line 11) and make it say</p>

<pre><code>shflag = -fPIC
</code></pre>

<p>Now save the file, close it and change back to LIGGGHTS src directory</p>

<pre><code>cd ..
</code></pre>

<p>You can create the library now that LAMMPS/LIGGGHTS needs for giving access to Python.</p>

<pre><code>make makeshlib
make -f Makefile.shlib fedora
</code></pre>

<p>This might even take longer than the previous <code>make fedora</code> command. But once it’s done you’ll have a file named <code>liblammps_fedora.so</code> and <code>liblammps.so</code>. These will be used by Python. So to allow Python access, we need to inform the machine where they’re located. With Ubuntu you can open your <code>.bashrc</code> file in your home directory and add the following two lines</p>

<pre><code>export PYTHONPATH=$PYTHONPATH:/home/jon/LIGGGHTS/LIGGGHTS-PUBLIC/python
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/jon/LIGGGHTS/LIGGGHTS-PUBLIC/src
</code></pre>

<p>Note that my username is <code>jon</code> on that machine so you’ll obviously need to replace that with your user.</p>

<p>You now should be able to open python in the terminal and then test LAMMPS with a </p>

<pre><code>import lammps
</code></pre>

<p>command. Cross your fingers and hope that works. As a bonus, the way it’s set up here, you can also download <code>pypar</code>, install it, and run LAMMPS in parallel with Python! I’m not 100% confident on the steps I used to get pypar running (though I’m <em>certain</em> I have to make sure <code>openmpi1.5-bin</code> is used) so I don’t want to give a walkthrough for that.</p>

<p>I hope this comes in handy for anyone else looking to use Python to avoid any of the miserable C++ coding of the source of LAMMPS/LIGGGHTS. Happy coding!</p>

<p>Update: I just went through the process on another computer at work and found the packages listed in the <code>pypar</code> readme were really all that were necessary to get it going if you’ve successfully done everything else above here. WITH TH EXCEPTION of needing specifically <code>openmpi1.5-bin</code>. These are the only packages you’d need:</p>

<pre><code>sudo apt-get install openmpi1.5-bin libopenmpi-dev python-dev python-numpy
</code></pre>

            </div>
        </div>
    </article>
    <div class="cf"></div>
    <div class="notepad-share-icons social-icons text-center">
        <div class="row">
            <section class="notepad-post-share">
                <a class="twitter-icon" href="https://twitter.com/intent/tweet?text=&quot;Python wrapping LAMMPS/LIGGGHTS in Ubuntu 12.04&quot;%20/engineering/python-wrapping-lammps-liggghts-in-ubuntu-12-04%20via%20&#64;jtvanlew" title="Share on Twitter">
                    <i class="fa fa-twitter"></i>
                </a>
                <a class="facebook-icon" href="https://www.facebook.com/sharer/sharer.php?u=/engineering/python-wrapping-lammps-liggghts-in-ubuntu-12-04"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
                    <i class="fa fa-facebook"></i>
                </a>
                <a class="google-icon" href="https://plus.google.com/share?url=/engineering/python-wrapping-lammps-liggghts-in-ubuntu-12-04"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
                    <i class="fa fa-google-plus"></i>
                </a>
            </section>
        </div>
    </div>
<div class="cf"></div>
    <section class="notepad-disqus">
	<div class="row">
		<div class="small-12 columns">
			<h1 class="notepad-comments-header">Comments</h1>
			<div id="disqus_thread"></div>
			<script type="text/javascript">
			    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
			    var disqus_shortname = 'jonnyvlreport'; // required: replace example with your forum shortname
			
			    /* * * DON'T EDIT BELOW THIS LINE * * */
			    (function() {
			        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			    })();
			</script>
			<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</div>
	</div>
</section>
<div class="cf"></div>
        <div class="notepad-author-info">
            <div class="row">
                <section class="notepad-post-author small-12 columns">
                    
                        <img src="/images/avatars/jtvanlew.jpg" class="notepad-post-author-avatar" alt="Jon Van Lew">
                    
                    
                        <span class="author-label">Author</span>
                        <h1><a href="/author/Jon Van Lew" class="author-link-name">Jon Van Lew</a></h1>
                    
                    
                        <p><a href="mailto:jtvanlew@ucla.edu" class="author-email">jtvanlew@ucla.edu</a></p>
                    
                    
                        <p></p>
                    
                </section>
            </div>
        </div>
<div class="cf"></div>
<footer class="notepad-site-footer">
    <div class="copyright">
         <section>All content copyright <a href="/about">Jon Van Lew</a> &copy; 2014 &bull; All rights reserved.</section>
         <section>Proudly published with <a class="icon-ghost" href="https://jekyllrb.com/">Jekyll</a> on <a href="/update-log">Saturday, 27 Dec 2014 at 11:05 AM UTC</a></section>
    </div>
    <div class="social-icons">
        
        
        <a href="/feed.xml">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-rss fa-stack-1x"></i>
            </span>
        </a>
        
        <a href="http://twitter.com/jtvanlew" target="_blank">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-twitter fa-stack-1x"></i>
            </span>
        </a>
        
        <a href="http://plus.google.com/https://plus.google.com/+JonVanLew/" target="_blank">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-google-plus fa-stack-1x"></i>
            </span>
        </a>
        
        <a href="http://instagram.com/jtvanlew" target="_blank">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-instagram fa-stack-1x"></i>
            </span>
        </a>
        
        <a href="http://github.com/jtvanlew" target="_blank">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-github fa-stack-1x"></i>
            </span>
        </a>
        
        <a href="http://facebook.com/jtvanlew" target="_blank">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-facebook fa-stack-1x"></i>
            </span>
        </a>
    </div>
    
    <div class="cf"></div>
</footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.11.1.min.js"><\/script>')</script>
    <script src="/assets/js/vendor/modernizr.js"></script>
    <script src="/assets/js/foundation.min.js"></script>
    
    <script src="/assets/js/notepad.js"></script>
    <script src="/assets/js/scripts.min.js"></script>
    <script src="/assets/js/vendor/nprogress.js"></script>


    <script>
      $(document).foundation();
    </script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24714334-1', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>

<script>NProgress.start();var interval=setInterval(function(){NProgress.inc()},1000);jQuery(window).load(function(){clearInterval(interval);NProgress.done()});jQuery(window).unload(function(){NProgress.start()});</script>

</body>
</html>